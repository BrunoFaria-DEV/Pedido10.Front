<h1 class="app-page-title">
  {{ title }}
  <a routerLink="/produtos" class="btn btn-sm app-btn-secondary float-end px-3">
      <i class="fas fa-angle-double-left"></i> Voltar
  </a>
</h1>

<div class="app-card shadow-sm p-4 border-left-decoration">
  <div class="app-card-body">
      <form [formGroup]="produtoForm" (ngSubmit)="onSubmit()">

          <!-- Nome do Produto -->
          <div class="mb-3">
              <label class="form-label">Nome do Produto</label>
              <input type="text" class="form-control" formControlName="Nome_Produto"
                  [ngClass]="{'is-invalid': hasError('Nome_Produto', 'required') || hasError('Nome_Produto', 'minlength') || hasError('Nome_Produto', 'maxlength')}">
              <div *ngIf="hasError('Nome_Produto', 'required')" class="invalid-feedback">
                  O nome do produto é obrigatório.
              </div>
              <div *ngIf="hasError('Nome_Produto', 'minlength') || hasError('Nome_Produto', 'maxlength')" class="invalid-feedback">
                  O nome deve ter entre 3 e 50 caracteres.
              </div>
          </div>

          <!-- Descrição -->
          <div class="mb-3">
              <label class="form-label">Descrição</label>
              <input type="text" class="form-control" formControlName="Descricao"
                  [ngClass]="{'is-invalid': hasError('Descricao', 'minlength') || hasError('Descricao', 'maxlength')}">
              <div *ngIf="hasError('Descricao', 'minlength') || hasError('Descricao', 'maxlength')" class="invalid-feedback">
                  A descrição deve ter entre 3 e 150 caracteres.
              </div>
          </div>

          <!-- Custo de Produção -->
          <div class="mb-3">
              <label class="form-label">Custo de Produção</label>
              <input type="number" class="form-control" formControlName="Custo_Producao"
                  [ngClass]="{'is-invalid': hasError('Custo_Producao', 'min') || hasError('Custo_Producao', 'pattern')}">
              <div *ngIf="hasError('Custo_Producao', 'min') || hasError('Custo_Producao', 'pattern')" class="invalid-feedback">
                  O custo de produção não pode ser negativo e deve ter no máximo 2 casas decimais.
              </div>
          </div>

          <!-- Margem de Lucro -->
          <div class="mb-3">
              <label class="form-label">Margem de Lucro (%)</label>
              <input type="number" class="form-control" formControlName="Margem_Lucro"
                  [ngClass]="{'is-invalid': hasError('Margem_Lucro', 'min') || hasError('Margem_Lucro', 'pattern')}">
              <div *ngIf="hasError('Margem_Lucro', 'min') || hasError('Margem_Lucro', 'pattern')" class="invalid-feedback">
                  A margem de lucro não pode ser negativa e deve ter no máximo 2 casas decimais.
              </div>
          </div>

          <!-- Preço -->
          <div class="mb-3">
              <label class="form-label">Preço</label>
              <input type="number" class="form-control" formControlName="Preco"
                  [ngClass]="{'is-invalid': hasError('Preco', 'required') || hasError('Preco', 'min') || hasError('Preco', 'pattern')}">
              <div *ngIf="hasError('Preco', 'required')" class="invalid-feedback">
                  O preço é obrigatório.
              </div>
              <div *ngIf="hasError('Preco', 'min') || hasError('Preco', 'pattern')" class="invalid-feedback">
                  O preço não pode ser negativo e deve ter no máximo 2 casas decimais.
              </div>
          </div>

          <!-- Estoque -->
          <div class="mb-3">
            <label class="form-label">Quantidade em Estoque</label>
            <input type="number" class="form-control" formControlName="QTDE_Estoque" min="0" 
              [ngClass]="{'is-invalid': hasError('QTDE_Estoque', 'required') || hasError('QTDE_Estoque', 'min')}">
            <div *ngIf="hasError('QTDE_Estoque', 'required')" class="invalid-feedback">
                O preço é obrigatório.
            </div>
            <div *ngIf="hasError('QTDE_Estoque', 'min')" class="invalid-feedback">
              A quantidade não pode ser negativa.
            </div>
        </div>

          <!-- Botão de Enviar -->
          <div class="pt-4 text-end">
              <button type="submit" class="btn app-btn-primary px-4" [disabled]="produtoForm.invalid">
                  <i class="fas fa-check me-1"></i>Salvar
              </button>
          </div>

      </form>
  </div>
</div>
